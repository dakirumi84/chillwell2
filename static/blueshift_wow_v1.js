"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach(function(t){_defineProperty(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _defineProperty(e,t,o){return t=_toPropertyKey(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(){function e(e){o.init_lib();try{console.log("Klaviyo-April-28-2023");var n=function(e){var t="";location.href.indexOf("?")&&(t=location.href.substr(location.href.indexOf("?")));var o=t.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return o?o[1]:null},a="",r=!1;e&&(r=!0,a=e.toUpperCase()+"-"),console.log("BS - client : ",r),console.log("BS - client prefix: ",a||"empty");var i,c=window.location.pathname,l=new RegExp(/^(93|355|213|684|376|244|809|268|54|374|297|247|61|672|43|994|242|246|973|880|375|32|501|229|975|284|591|387|267|55|673|359|226|257|855|237|238|345|236|235|56|86|886|57|269|682|506|385|53|357|420|45|767|253|593|20|503|240|291|372|251|500|298|679|358|33|596|594|241|220|995|49|233|350|30|299|473|671|502|224|245|592|509|504|852|36|354|91|62|98|964|353|972|39|225|876|81|962|7|254|686|82|850|965|996|371|856|961|266|231|370|218|423|352|853|389|261|265|60|960|223|356|692|222|230|52|691|373|976|212|258|95|264|674|977|31|599|869|687|64|505|227|234|683|1670|47|968|92|680|507|675|595|51|63|48|351|1787|974|262|40|250|670|378|239|966|221|381|248|232|65|421|386|677|252|27|34|94|290|508|249|597|46|41|963|689|255|66|228|690|676|1868|216|90|993|688|256|380|971|44|598|1|678|58|84|1340|681|685|967|243|260|263)\d+/),d=function(e){return l.test(e)},u=function(){return(new Date).toISOString()},s=function(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},m=!1,p="",w="",_="",g=!0,f=JSON.parse(window.__CTR_FP_TRACKING_SETTINGS.FP_TRACKING_CUSTOM_DATA).campaignName,y=!1,v="",h=n("guid");if("false"===n("ext_scripts"))return;var b=[{account:"GPC",publish_key:"TufT7Q",list_id:"YsVgvE"},{account:"Gadgetcrate",publish_key:"REhpJV",list_id:"Y78AHy"},{account:"Etshera",publish_key:"YajmSp",list_id:"VVkbBb"},{account:"Korehealth",publish_key:"RheB4Y",list_id:"YcH78d"}],S=null,C=function(){var e=window.ctrwowCheckout.checkoutData.getProduct(),t=window.localStorage.getItem("doubleQuantity")?e.quantity/2:e.quantity;return{products:[{productId:a+e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:t}],sku:e.sku}},I=function(){var e="other";try{[{kore:"Kore"},{mindinsole:"Kore"},{starscope:"GadgetCrate"},{blast:"Etshera"},{blaux:"Etshera"},{heatcore:"Etshera"},{bulb:"Etshera"},{buzzbgone:"Etshera"},{clubcrush:"Kore"},{divinair:"Etshera"},{drgoodrow:"Etshera"},{goldweasel:"Etshera"},{qbkraftz:"Etshera"},{automend:"GadgetCrate"},{blx:"GadgetCrate"},{hajimari:"GadgetCrate"},{herculian:"GadgetCrate"},{infiniti:"GadgetCrate"},{kaydia:"GadgetCrate"},{nerlos:"GadgetCrate"},{novawave:"GadgetCrate"},{rangextd:"GadgetCrate"},{renuback:"GadgetCrate"},{snapshot:"GadgetCrate"},{soloforce:"GadgetCrate"},{actionhero:"SharkTrack"},{dreast:"Kainero"},{equalplus:"Kainero"},{feverpatrol:"Kainero"},{fotia:"Kainero"},{hvn:"Kainero"},{inheat:"Kainero"},{laidback:"Kainero"},{mobileklean:"Kainero"},{onehand:"Kainero"},{opti:"Kainero"},{oshen:"Kainero"},{outstyle:"Kainero"},{perropal:"Kainero"},{quietbud:"Kainero"},{raptor:"Kainero"},{rudy:"Kainero"},{second:"Kainero"},{spectroseal:"Kainero"},{tapncharge:"Kainero"},{twohand:"Kainero"},{vitahair:"Kainero"},{washwand:"Kainero"},{wrapslice:"Kainero"},{karben:"GadgetCrate"},{mhamo:"Etshera"},{outfind:"Kainero"},{drfizz:"Kainero"},{honjo:"Etshera"}].forEach(function(t){var o=Object.keys(t);location.hostname.indexOf(o)>-1&&(e=t[Object.keys(t)])})}catch(e){console.log("Get Store Source Fail")}return e},k=function(e){try{var t=window.__CTRWOW_CONFIG?window.__CTRWOW_CONFIG.offerName:"",o=window.__CTRWOW_CONFIG?window.__CTRWOW_CONFIG.offerId:"",n=window.__CTRWOW_CONFIG?window.__CTRWOW_CONFIG.PAGE_TYPE:"",a={data:{type:"subscription",attributes:{list_id:e,custom_source:"[Parent campaign: ".concat(t,"] - [CampaignID: ").concat(o,"] - [Page type: ").concat(n,"]"),email:"",phone_number:"",properties:{first_name:document.querySelector('[name="firstName"]').value||"",last_name:document.querySelector('[name="lastName"]').value||"",client:r||!1,guid:window.ctrwowUtils.handleParam.getQueryParameter("guid")||""}}}};m&&(a.data.attributes.phone_number=_||document.querySelector('[name="phoneNumber"]').value),g||(a.data.attributes.email=document.querySelector('[name="email"]').value);var i=I();return i&&(a.data.attributes.properties["".concat(i.toLowerCase(),"_lead")]=!0),a}catch(e){return console.log(e),{}}},O=function(){try{var e={data:{type:"profile",attributes:{email:null,phone_number:null,first_name:document.querySelector('[name="firstName"]').value||"",last_name:document.querySelector('[name="lastName"]').value||"",location:{address1:document.querySelector('[name="address1"]').value,address2:document.querySelector('[name="address1"]').value,city:document.querySelector('[name="city"]').value,country:document.querySelector('[name="countryCode"]').value,region:document.querySelector('[name="state"]').value,zip:document.querySelector('[name="zipCode"]').value,timezone:u()},properties:{}},meta:{identifiers:{email:null,phone_number:null}}}};return m&&(e.data.attributes.phone_number=_||document.querySelector('[name="phoneNumber"]').value,e.data.meta.identifiers.phone_number=_||document.querySelector('[name="phoneNumber"]').value),g||(e.data.attributes.email=document.querySelector('[name="email"]').value,e.data.meta.identifiers.email=document.querySelector('[name="email"]').value),e}catch(e){return console.log(e),{}}},P=function(){try{var e={first_name:document.querySelector('[name="firstName"]').value||"",last_name:document.querySelector('[name="lastName"]').value||"",ship_city:document.querySelector('[name="city"]').value,ship_address:document.querySelector('[name="address1"]').value,ship_state:document.querySelector('[name="state"]').value,ship_zip:document.querySelector('[name="zipCode"]').value,ship_country:document.querySelector('[name="countryCode"]').value,customer_language:document.querySelector("html").getAttribute("lang")||"",joined_at:u(),fingerprint_id:window._EA_ID,landing_base_url:window.location.href,referrer:document.referrer};e.client=!!r,window.CC_Code&&(e.coupon=window.CC_Code),m&&(e=_objectSpread(_objectSpread({},e),{},{phone_number:_||document.querySelector('[name="phoneNumber"]').value,phone_valid:m,phone_linetype:p,phone_carrier:w})),g||(e=_objectSpread(_objectSpread({},e),{},{email:document.querySelector('[name="email"]').value}));var t=I();return t&&(e["event_".concat(t.toLowerCase(),"_lead")]=!0),e}catch(e){return console.log(e),{}}},q=function(e){try{var t=window.localStorage.getItem("realDoubleQuantity")?e.quantity/2:e.quantity,o=window.location.href,n=o.split("?")[0],i={email:document.querySelector('[name="email"]').value||"",product_ids:[a+e.productId],items:[{productId:a+e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:t}],sku:e.sku,currency:window.localStorage.getItem("currencyCode"),landing_base_url:n,customer_language:document.querySelector("html").getAttribute("lang")||""};i.client=!!r;var c=I();return c&&(i["event_".concat(c.toLowerCase(),"_lead")]=!0),i}catch(e){return console.log(e),{}}},N=function(e,t,o){try{if(void 0===t)return;var n="https://a.klaviyo.com/client/subscriptions/?company_id=".concat(t),a=k(o);if(!a.data.attributes.email&&!a.data.attributes.phone_number)return;var r=new Date,i=r.getFullYear(),c=r.getMonth()+1<10?"0".concat(r.getMonth()+1):r.getMonth()+1,l=r.getDate()<10?"0".concat(r.getDate()):r.getDate(),d="".concat(i,"-").concat(c,"-").concat(l),u={method:"POST",headers:{revision:d,"content-type":"application/json"},body:JSON.stringify(a)};window.ctrwowUtils.callAjax(n,u).then(function(){console.log("submited data to subscribe API: "+e)}).catch(function(){console.log("submitDataToConsentSubscribe fail: "+e)})}catch(t){console.log("submitDataToConsentSubscribe fail: "+e)}},D=function(){b.forEach(function(e){N(e.account,e.publish_key,e.list_id)}),window.isDeplayCallSubmitted=!0},E=function(){clearTimeout(S),S=setTimeout(D,5e3)},K=function(){window.isDeplayCallSubmitted||(clearTimeout(S),D())},j=function(e,t){try{if(void 0===t)return;var o="https://a.klaviyo.com/client/profiles/?company_id=".concat(t),n=O();if(!n.data.attributes.email&&!n.data.attributes.phone_number)return;var a=new Date,r=a.getFullYear(),i=a.getMonth()+1<10?"0".concat(a.getMonth()+1):a.getMonth()+1,c=a.getDate()<10?"0".concat(a.getDate()):a.getDate(),l="".concat(r,"-").concat(i,"-").concat(c),d={method:"POST",headers:{revision:l,"content-type":"application/json",accept:"application/json"},body:JSON.stringify(n)};window.ctrwowUtils.callAjax(o,d).then(function(){console.log("submited data to update profile: "+e)}).catch(function(){console.log("submitDataToUpdateProfile fail:"+e)})}catch(t){console.log("submitDataToUpdateProfile fail: "+e)}},T=function(){b.forEach(function(e){j(e.account,e.publish_key)})},A={handleMouseOut:function(e){e.pageY-window.pageYOffset<=0&&K()}},U=function(e){if(e){var o=e.value&&!e.classList.contains("error"),n="https://salessupport.tryemanagecrm.com/api/validation/verify-email/?email=".concat(e.value);o&&window.ctrwowUtils.callAjax(n,{headers:{X_CID:"584ea331-0cd2-4c48-85d9-737f9dddfa0b","Content-Type":"application/json"}}).then(function(e){if(!e)throw"Error";if(e.isVerified&&e.isValid){window.ctrwowUtils.events.emit("onValidEmail"),window.localStorage.removeItem("isInvalidEmail"),g=!1;var o=P();window._learnq.push(["identify",{$email:o.email}]),setTimeout(function(){console.log("Klaviyo identify=======================>\n",o),window._learnq.push(["track","identify",o]);var e=window.ctrwowCheckout.checkoutData.getProduct(),t=q(e);console.log("Klaviyo add_to_cart ========================>\n",t),window._learnq.push(["track","add_to_cart",t]),E()},1e3);var n=window.__productListData?window.__productListData.data.productList.location:null;t.track("visit",{email:o.email,event_type:"visit",landing_base_url:o.landing_base_url,fingerprint_id:o.fingerprint_id,customer_language:o.customer_language,location:{country_code:n.countryCode,country_name:n.countryName,region_code:n.regionCode,region_name:n.regionName,city:n.city,zip_code:n.zipCode?n.zipCode:""}})}else window.localStorage.setItem("isInvalidEmail",!0),g=!0}).catch(function(e){window.localStorage.setItem("isInvalidEmail",!0),g=!0,console.log(e)})}},x=function(){var e=P();if(e.guid=h,!g){console.log("Klaviyo identify =======================>\n",e),window._learnq.push(["track","identify",e]);var t=window.ctrwowCheckout.checkoutData.getProduct(),o=q(t);o.one_click_purchase_reference=h,console.log("Klaviyo add_to_cart ========================>\n",o),window._learnq.push(["track","add_to_cart",o])}for(var n=C(),a=n.products,c=[],l=0,d=a.length;l<d;l++)c.push(a[l].productId);var u={one_click_purchase_reference:h,fingerprintId:window._EA_ID,referrer:document.referrer,countryCode:e.ship_country,regionCode:e.ship_state,ip:i.location.ip,product_ids:c,items:a,sku:n.sku,currency:window.localStorage.getItem("currencyCode")};u.client=!!r,console.log("Klaviyo checkout ================>\n",u),window._learnq.push(["track","checkout",u]),T()},L=function(){var e=JSON.parse(window.localStorage.getItem("prevItem")),t=window.localStorage.getItem("orderInfo"),o=window.localStorage.getItem("userPaymentType"),n=window.localStorage.getItem("location");if(e){for(var i=window.localStorage.getItem("doubleQuantity")?e.quantity/2:e.quantity,c=[{productId:a+e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:i}],l=e.sku,d=[],m=0,p=c.length;m<p;m++)d.push(c[m].productId);var w=window.location.href,_=w.split("?")[0],g={order_create_date:u(),ip_address:n.ip||"",internal_campaignname:e.campaignName,device_type:s(),device_vendor:window.navigator.vendor,campaignname:e.campaignName,landingurl:w,landing_base_url:_,referringurl:document.referrer,parentcampaign:window.localStorage.getItem("mainCampaignName"),product_ids:d,items:c,sku:l,referring_base_url:localStorage.getItem("ctr_checkout_url")&&localStorage.getItem("ctr_checkout_url").split("?")[0]};if("creditcard"===o&&h&&(g.one_click_purchase_reference=h),r&&(g.client=r),"true"===window.localStorage.getItem("isInvalidEmail"))return!1;if(t){t=JSON.parse(t);var f=t.cusEmailPP||t.cusEmail||window.localStorage.getItem("customer_email");if(!f)return!1;g=_objectSpread(_objectSpread({},g),{},{email:f,order_id:a+t.orderNumber,customer_language:document.querySelector("html").getAttribute("lang")||""})}else{if(!window.localStorage.getItem("customer_email"))return!1;g=_objectSpread(_objectSpread({},g),{},{email:window.localStorage.getItem("customer_email")})}return g}return!1},F=function(){try{window.localStorage.removeItem("isFiredMainOrderBlueshift"),i=window.__productListData.data.productList;var e=window.__checkoutData.data.product;if(!i||!window._EA_ID||y||!e)return;console.log("Klaviyo",i,window._EA_ID),window.localStorage.setItem("_vid",window._EA_ID),y=!0;var t=Array.prototype.slice.call(document.querySelectorAll('[name="email"], [name="firstName"], [name="lastName"], [name="phoneNumber"]')),o=P(),a=$('input[name="phoneNumber"]'),c=document.querySelector('[name="shippingAddress"] [name="countryCode"]'),l=!1,u=!1,s=function e(t){try{var r=a.val().match(/\d/g);if(!r)return;r=r.join("");var i="//apilayer.net/api/validate?access_key=755a648d3837cf3adb128f29d322879a&number=".concat(r),s=d(r);window.localStorage.getItem("ctr__countryCode")&&(v=window.localStorage.getItem("ctr__countryCode")),c&&c.value&&(v=c.value),v&&(s&&!u||(i="//apilayer.net/api/validate?access_key=755a648d3837cf3adb128f29d322879a&number=".concat(r,"&country_code=").concat(v.toLowerCase()))),"1"===n("validPhone")&&a.rules("remove","cphone"),window.ctrwowUtils.callAjax(i).then(function(r){if(r.valid&&(window.phoneRes=r),r.country_code.toLowerCase()!==v.toLowerCase()&&!u)return u=!0,void e();if(u&&!r.valid&&window.phoneRes&&(r=_objectSpread({},window.phoneRes)),m=r.valid,p=r.line_type,w=r.carrier,m?(a.addClass("correct-phone"),_=r.international_format,o=P(),g||(console.log("Klaviyo identify=======================>\n",o),window._learnq.push(["track","identify",o]),E())):"1"===n("validPhone")&&a.removeClass("correct-phone"),"1"===n("validPhone")){if(r.country_code&&c.value.toLowerCase()!==r.country_code.toLowerCase()&&c.querySelector('option[value="'.concat(r.country_code,'"]'))&&!t){l=!0,c.value=r.country_code,c.dispatchEvent(new Event("change"));$('form[name="shippingAddress"]').validate().element(c)}a.rules("add",{cphone:!0});$('form[name="customer"]').validate().element(a),l=!1}}).catch(function(e){console.log(e)})}catch(e){console.log(e)}};c&&c.addEventListener("change",function(){l||s(!0)}),h&&(s(),U(window._q('input[name="email"]'))),t.forEach(function(e){e.addEventListener("blur",function(e){try{o=P(),"email"===e.currentTarget.getAttribute("name")&&e.currentTarget.classList.contains("valid")&&window.currentEmail!==e.currentTarget.value&&(console.log("Klaviyo - Fire identify"),window.currentEmail=e.currentTarget.value,window.isDeplayCallSubmitted=!1,U(e.currentTarget)),"phoneNumber"===e.currentTarget.getAttribute("name")&&window.currentPhone!==e.currentTarget.value&&(window.currentPhone=e.currentTarget.value,u=!1,window.isDeplayCallSubmitted=!1,s())}catch(e){console.log(e)}})}),window.pauseCheckoutProcessing={isPause:!0,delay:500},document.querySelector("body").insertAdjacentHTML("beforeend",'<span class="custom-loading" style="display: none;"></span>'),window.ctrwowUtils.events.on("afterSubmitOrder",function(e){e&&e.referenceId&&e.useCreditCard&&(h=e.referenceId,x())}),window.ctrwowUtils.events.on("declinePayment",function(){if(h){var e=L();e&&(console.log("Klaviyo decline ==============>\n",e),window._learnq.push(["track","decline",e]))}}),window.ctrwowUtils.events.on("onAfterActivePopup",function(){try{window.CC_Code=window.ctrwowCheckout.checkoutData.getCouponCode(),o=P(),g||(console.log("Klavity identify ==============>\n",o),window._learnq.push(["track","identify",o]))}catch(e){console.log(e)}}),window.ctrwowUtils.events.on("beforeSubmitOrder",function(){try{o=P(),g||(console.log("Klavity identify ==============>\n",o),window._learnq.push(["track","identify",o])),window.localStorage.setItem("identifyData",JSON.stringify(o));var e=window.ctrwowCheckout.checkoutData.getProduct();e.campaignName=f,window.localStorage.setItem("prevItem",JSON.stringify(e)),console.log("Klaviyo - Fire checkout");for(var t=C(),n=t.products,a=[],c=0,l=n.length;c<l;c++)a.push(n[c].productId);var d={fingerprintId:window._EA_ID,referrer:document.referrer,countryCode:o.ship_country,regionCode:o.ship_state,ip:i.location.ip,product_ids:a,items:n,sku:t.sku,currency:window.localStorage.getItem("currencyCode")};d.client=!!r,console.log("Klaviyo checkout ==============>\n",d),window._learnq.push(["track","checkout",d]),K()}catch(e){console.log(e)}}),window.localStorage.setItem("location",JSON.stringify(i.location)),window.ctrwowCheckout.checkoutData.onProductChange(function(){try{var t=window.ctrwowCheckout.checkoutData.getProduct();if(t.productId===e.productId)return;var o=q(e),n=q(t);document.querySelector('[name="email"]')&&document.querySelector('[name="email"]').classList.contains("valid")&&(g||(console.log("Klaviyo removed and add_to_cart========================>\n",n),window._learnq.push(["track","remove_from_cart",o]),window._learnq.push(["track","add_to_cart",n]))),e=window.ctrwowCheckout.checkoutData.getProduct()}catch(e){console.log(e)}})}catch(e){console.log("Warning: orderPageEvents")}};!function(){try{if(c.indexOf("/order")>-1){F();var e=0,o=setInterval(function(){e++,window.__productListData&&window.__productListData.data&&window.__productListData.data.productList&&window._EA_ID&&(F(),clearInterval(o)),50===e&&clearInterval(o)},300);return void document.addEventListener("mouseout",A.handleMouseOut)}var n=window.localStorage.getItem("orderInfo"),i=window.localStorage.getItem("location"),l=window.localStorage.getItem("isInvalidEmail"),d=window.localStorage.getItem("isFiredMainOrderBlueshift"),m=window._EA_ID||window.localStorage.getItem("_vid");window.localStorage.getItem("referrerUrl")||window.localStorage.setItem("referrerUrl",document.referrer);var p=function(e,t){try{var o=e.orderNumber,n=window.localStorage.getItem("doubleQuantity")?Math.ceil(e.quantity/2):e.quantity,c=Number(e.orderTotalFull),l=[{productId:a+e.orderedProducts[0].pid,sku:e.orderedProducts[0].sku,total_usd:e.orderTotalFull,quantity:n}],d=e.orderedProducts[0].sku;if(e.upsellUrls&&e.upsellUrls.length>0)for(var m=0,p=e.upsellUrls.length;m<p;m++)"fired"===e.upsellUrls[m].isFired&&(c+=e.upsellUrls[m].price);t&&(o=e.orderNumber,f=t.campaignName,l=[{productId:a+t.orderedProducts[0].pid,sku:t.orderedProducts[0].sku,total_usd:t.price,quantity:t.orderedProducts[0].quantity}],d=t.orderedProducts[0].sku);for(var w=[],_=0,g=l.length;_<g;_++)w.push(l[_].productId);var y=window.location.href,v=y.split("?")[0],h={order_id:a+o,email:e.cusEmail,order_create_date:u(),ip_address:i.ip||"",customer_language:document.querySelector("html").getAttribute("lang")||"",device_type:s(),device_vendor:window.navigator.vendor,campaignname:f,internal_campaignname:f,landingurl:y,landing_base_url:v,referringurl:document.referrer,parentcampaign:window.localStorage.getItem("mainCampaignName"),product_ids:w,items:l,sku:d,revenue:c.toFixed(2),currency:window.localStorage.getItem("currencyCode")};h.client=!!r;var b=I();return b&&(h["event_".concat(b.toLowerCase(),"_lead")]=!0),h}catch(e){return console.log(e),{}}};if(n&&m){n=JSON.parse(n),i=JSON.parse(i||"{}");var w=window.localStorage.getItem("identifyData");if(w&&(w=JSON.parse(w),window.localStorage.setItem("identifyData",JSON.stringify(w)),"true"!==l&&(console.log("Klaviyo identify =======================>\n",w),window._learnq.push(["track","identify",w]))),d){if(n.upsellUrls&&n.upsellUrls.length>0){var _=n.upsellUrls.length-1,g=n.upsellUrls[_],y=localStorage.getItem("subOrderNumber");n.upsellUrls[_].isFired||n.upsellUrls[_].orderNumber===y||(n.upsellUrls[_].isFired="fired",console.log("Klaviyo - Fire Purchase"),"true"!==l&&(console.log("Klavity purchase ==============>\n",p(n,g)),window._learnq.push(["track","purchase",p(n,g)])))}}else{if(console.log("Klaviyo - Fire Purchase"),n.upsellUrls&&n.upsellUrls.length>0&&localStorage.setItem("subOrderNumber",n.upsellUrls[0].orderNumber),"true"!==l){var v=p(n);console.log("Klavity purchase ==============>\n",v),window._learnq.push(["track","purchase",v]);var h=window.__productListData?window.__productListData.data.productList.location:null;t.track("purchased",{email:v.email,event_type:"purchased",landing_base_url:v.landing_base_url,fingerprint_id:window._EA_ID,customer_language:v.customer_language,order_number:v.order_id,location:{country_code:h.countryCode,country_name:h.countryName,region_code:h.regionCode,region_name:h.regionName,city:h.city,zip_code:h.zipCode?h.zipCode:""}})}window.localStorage.setItem("isFiredMainOrderBlueshift",!0)}window.localStorage.setItem("orderInfo",JSON.stringify(n))}if(window.ctrwowUtils.events.on("onBeforePlaceUpsellOrder",function(){var e;e="object"===_typeof(window.upsells)&&window.upsells.length>0?window.upsells[window.upsell_productindex||0]:window.ctrwowUpsell.productListData.getProductList().prices[window.upsell_productindex||0],e.campaignName=f,window.localStorage.setItem("prevItem",JSON.stringify(e))}),c.indexOf("decline")>-1){var b=L();if(b){console.log("Klaviyo decline ================>\n",b),window._learnq.push(["track","decline",b]);var S=window.localStorage.getItem("location");S&&(S=JSON.parse(S)),t.track("declined",{email:b.email,event_type:"declined",landing_base_url:b.landing_base_url,fingerprint_id:window._EA_ID,customer_language:b.customer_language,location:{country_code:S.countryCode,country_name:S.countryName,region_code:S.regionCode,region_name:S.regionName,city:S.city,zip_code:S.zipCode?S.zipCode:""}})}}}catch(e){console.log(e)}}(),"1"===n("validPhone")&&function(){try{var e={en:"Please enter a international phone number or update your country.",de:"Bitte geben Sie eine gültige Telefonnummer ein.",fr:"Veuillez saisir un numéro de téléphone valide.",jp:"有効な電話番号を入力してください。",cn:"请输入有效电话号码。",br:"Por favor insira um telefone válido.",es:"Por favor introduzca un número de teléfono válido.",pt:"Por favor insira um número de telefone válido."};window.phoneMsg=e.en,c.indexOf("/de/")>-1&&(window.phoneMsg=e.de),c.indexOf("/fr/")>-1&&(window.phoneMsg=e.fr),c.indexOf("/jp/")>-1&&(window.phoneMsg=e.jp),c.indexOf("/cn/")>-1&&(window.phoneMsg=e.cn),c.indexOf("/br/")>-1&&(window.phoneMsg=e.br),c.indexOf("/es/")>-1&&(window.phoneMsg=e.es),c.indexOf("/pt/")>-1&&(window.phoneMsg=e.pt),$.validator.addMethod("cphone",function(e,t){return $(t).hasClass("correct-phone")},window.phoneMsg)}catch(e){console.log(e)}}()}catch(e){console.log(e)}}var t={send_data_to_fcai_va:function(e){console.log("send_data_to_fcai_va ==================>",e),fetch("https://www.firstcontactai.com/fcai-va-fe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return e.json()}).then(function(e){console.log("send_data_to_fcai_va successfully => ",e)}).catch(function(e){console.log("send_data_to_fcai_va fail",e)})},visit:function(e){var o=document.querySelector('[name="firstName"]');o&&""!==o.value.trim()&&sessionStorage.fcai_va_visit_email!==e.email?(e.first_name=o.value.trim(),t.send_data_to_fcai_va(e),console.log("fcai-va visit fired"),sessionStorage.fcai_va_visit_email=e.email):o.addEventListener("blur",function(){var n=document.querySelector('input[name="email"]');sessionStorage.fcai_va_visit_email!==n.value.trim()&&""!==o.value.trim()&&(e.first_name=o.value.trim(),e.email=n.value.trim(),t.send_data_to_fcai_va(e),console.log("fcai-va visit fired"),sessionStorage.fcai_va_visit_email=n.value.trim())})},purchased:function(e){sessionStorage.fcai_va_purchased_email!==e.email&&(t.send_data_to_fcai_va(e),console.log("fcai-va purchased fired"),sessionStorage.fcai_va_purchased_email=e.email)},declined:function(e){sessionStorage.fcai_va_declined_email!==e.email&&(t.send_data_to_fcai_va(e),console.log("fcai-va declined fired"),sessionStorage.fcai_va_declined_email=e.email)},track:function(e,o){if(-1===location.href.indexOf("fcai-va=1"))return void console.log("fcai-va is not running");switch(console.log("fcai-va is running"),o.domain=location.hostname,e){case"visit":t.visit(o)}}},o={init_lib:function(){window._learnq=window._learnq||[];var e=document.createElement("script");e.src="//static.klaviyo.com/onsite/js/klaviyo.js?company_id=TufT7Q",e.async=!0,document.head.appendChild(e)}};!function(){window.addEventListener("load",function(){if(window.__CTRWOW_CONFIG)if(window.__ctrPageConfiguration&&window.__ctrPageConfiguration.sourceConfig&&window.__ctrPageConfiguration.sourceConfig.source)e(window.__ctrPageConfiguration.sourceConfig.source);else{var t=window.__CTRWOW_CONFIG.X_CID;t&&fetch("https://salessupport.tryemanagecrm.com/api/clients/settings",{headers:{X_CID:t}}).then(function(e){return e.json()}).then(function(t){t&&e(t.clientCode)}).catch(function(e){return console.log(e)})}})}()}();